# 生产中harbor从http升级到https
uuid: 6a550037-aff1-1feb-7339-5948fce95bfd
uuid: 99ea5ad6-5936-f162-900d-a2f76d78aba3
uuid: 329b6eb2-624c-c939-8781-4abc5c65266b
uuid: c4f101be-712a-9657-4dcb-3e7396ca8110
uuid: 2ca4c91c-80d5-e832-5328-06ba59b5507d
uuid: 27ee0bae-fc9d-769c-d2af-f3797b42dc5f
uuid: 99d11cb5-db34-eb17-e283-ed2405ee40ef
uuid: d2d04ac1-ffb9-787b-4fb7-943518dc3eed
uuid: 1da088ab-c036-2b71-2c32-e8b457553332
uuid: 9257a18c-bd60-adc9-d954-0f3c4730777b
uuid: 285e2ef9-3b00-1762-4ab7-21e5d33bffff
uuid: 11b3dac2-1fe0-af9b-6d16-09b7156b3531
uuid: ce20e2e5-ffae-3833-657f-7071e2f0b01b
uuid: 6d17f245-746b-7ac9-c6bd-999dffc2bc2a
uuid: febb34aa-53a9-6fda-d6ea-2cc6665ca5a9
uuid: 2b8e18dc-a6ef-1b62-3d15-439027236cf7
uuid: 0ce920ad-f311-ac88-1f5a-0d0d7064697c
uuid: 23c70f8c-36f4-e280-adbb-4552db38797e
uuid: 1eaad328-24d3-27b4-2986-73cbbab6eadf
uuid: 2787e642-26d1-7fdb-ceac-877ce4f31193
uuid: 8aaa03a2-21b7-45c0-85f4-9eb866de9516
uuid: c6bbe885-690f-f0d3-746f-dcf43c1f9a60
uuid: 54a1d01a-f088-b4d6-cf0b-995504a722a8
uuid: b11ebad3-e87c-f72c-0085-55a41bb3e861
uuid: 440c679f-21f2-35d5-812f-6b4cb66ea75f
uuid: 6c76a11c-064b-ed67-eee6-697bfcaf7098
uuid: c6bcc52e-bf89-c526-2305-6187c7ed6220
uuid: 6443aab7-6108-676f-211b-a1cb224717f8
uuid: ab753288-90e8-0b14-308b-d72f1311716a
uuid: 3ed455c4-ebc2-a636-52bc-f5129dec957c
uuid: ad344880-a0a5-951f-eb23-988589d4ff1a
uuid: 39c244a2-042e-8471-10e2-284a998b59e7
uuid: 879dd102-3903-7585-d428-a3cc9a334ad6
uuid: d91130bb-c902-58e8-8ee8-9b78951d76ca
uuid: 8531e177-4387-7f53-e5af-c108eb69079f
uuid: 208a5781-a987-fb62-4fe8-7143849a00da
uuid: 3947beda-fd6d-725f-f451-8c044623fed2
uuid: 72d84167-3e9e-fb64-0329-3eaeb508415b
uuid: f0731ca2-e5af-a2e6-92a4-5662a4ebdd54
uuid: f09c406c-2987-4646-4a75-c238f5e7006c
uuid: a4b615e4-f044-e890-f2cb-bda9487eefa6
uuid: 6f8f756d-5737-c418-9664-1b7d0a3c3c31
uuid: af174220-8edf-e1f2-a13e-2824e0ca0247
uuid: b65bc2bf-93b5-987c-a91f-93f78102e6b7
uuid: cfb10277-c16e-c8df-cc3d-85c4d616e355
uuid: 23c84154-b185-97f0-556e-a46584b43fcf
uuid: e4d28ccb-ced6-1b6b-6069-0566e63ab347
uuid: 0894cb47-6a4b-ee1b-367d-bf04b8e88b09
uuid: 34d25673-4395-8399-d20b-3bb3c4a98ca3
uuid: 6de444b6-b7d8-60f6-fd8a-3e5f5c935554
uuid: 97171c8e-70cc-4ed8-5144-3400ffec1dd9
uuid: 0af88f8c-d12f-7c8e-ce48-68d5e1539c0e
uuid: b754e5c8-f76f-a611-c182-961e5fdb6b68
uuid: e2c94ee4-58d9-b541-abfc-7e3e11f5df1a
uuid: ae341eca-5c15-5435-99b7-a0b3a0322933
uuid: cc429372-da1a-d2a3-246e-80902f3d6fe0
uuid: e7556bd1-ea57-0504-30a3-e650a75fdd55
uuid: 68c76b35-cf17-f055-1f7a-9c5a08c94676
uuid: 9fba786b-ea6c-8171-c657-7ba9442bfd46
uuid: f2eb958c-db2a-d25d-b971-f534d1428685
uuid: 0b1c01a1-b2f2-bd9f-5214-9e38f722ea3e
uuid: e9210064-4f26-b340-6503-09f28e012625
uuid: ddbea656-93a7-5724-71ad-3442e8c86bb9
uuid: de0ca852-ad95-21c5-b2e5-d3415af9f000
uuid: 5e9fb395-f169-c3ec-7940-49c3992f015f
uuid: 8ae52e55-0214-7c83-f6bb-d7451aae239c
uuid: 62f9a6c6-ea66-8fbd-78b0-aae1c12d96cc
uuid: 71dbc3bc-c46d-3ebc-be81-839c2f866c54
uuid: bd074d07-cc9a-9825-6f66-10f900dd817b
uuid: 02b50ffe-56a6-c33e-3bf0-d1554995ec51
uuid: c8671ec5-cd12-e129-40f6-40f89d026aee
uuid: 55f1f19d-b6ab-f439-84ab-ed5197a7c271
uuid: 072219d7-879e-f135-5f87-8e9f7631ed5d
uuid: 782f5edc-e596-4ce7-03ec-761603e73656
uuid: ef917dae-8736-a82f-8ee7-bf7d7b09765e
uuid: 6c840866-3706-e2de-118b-cdb56c67809c
uuid: 43ff5fd6-2c7d-f156-f2ef-688878fdef83
uuid: 7ff0b5c1-dcf9-73a0-8cdd-d05cb884f6b3
uuid: b884a776-f44b-eee8-2aca-c2fae00c3f8c
uuid: 258f8d06-7890-a047-2b22-7dce5708bf53
uuid: 14362182-dfa0-2f7d-ceaf-c526e5269f60
uuid: 26acba85-9bb2-ab11-4a93-26ab41f38427
uuid: 47c83c94-110e-2cd0-79bc-e58d47625a1c
uuid: 76fb5d96-c0db-32f4-22be-56f383ae5f8e
uuid: 3243ffa6-3633-5960-37d6-508884b74b2e
uuid: d9d2b93c-d463-406d-50a1-1899d6204d80
uuid: 8dacad47-c5cb-b0fb-9c3c-df9bca25099e
uuid: 7af3e279-e921-0c48-ac0a-6bd7d77cf901
uuid: 7cca5e5e-502d-27f2-d8ef-993c68e05084
uuid: e1d36e89-f9ae-9221-66a6-ed92b7723918
uuid: de7ba69f-1c6f-7f17-086e-3dbbed59f206
uuid: 4af642aa-828e-0e60-2cce-f151af4c2531
uuid: 7793142e-1f4e-b6ba-b0d9-8c57bdd96724
uuid: 87cae749-ce5a-4c19-1967-2881ec20455f
uuid: f6bba000-33b6-eda5-6517-141a9cb735d0
uuid: 5e902578-0441-d6e3-0841-9e15e08214d4
uuid: 4b8a3065-ee25-5b45-79d0-f0a5c4df4460
uuid: 28e117e5-056d-3277-016f-312ffa03dcc2
uuid: 6dcee744-f07a-4a37-89d3-537dc7167b6a
uuid: a67af9a2-45d5-19d5-d890-bd770496876b
uuid: 4ac68059-2de2-d55f-6af1-16e177c54f72
uuid: 7f78e1c1-3652-b49c-3307-0e52ab89640b
uuid: 3342c1a0-a320-348e-7488-281b3a937333
uuid: bcd1f96f-171f-46f2-559a-b69aeb546d8f
uuid: 26dff7bb-9c00-71f9-d51c-5c09ad9cc355
uuid: 311cc3b9-e962-5a45-62e7-d77303502c9c
uuid: 79ddab52-2f09-e5a6-601a-bb336f733661
uuid: 08070762-a0ac-7115-a833-489f774bcbcd
uuid: 97abee52-bc69-2db6-7e99-5a7ccd488818
uuid: 9ae8c3b9-47cf-53a5-ab6e-b324a58aeeea
uuid: 43e26a5d-fc11-1c84-fbf4-10ba254ea5ce
uuid: fd7e6a6b-86e3-72af-8626-bde25975adcf
uuid: e3d27bf3-d417-aa0d-19ed-7bceec9fad0a
uuid: 026d0f63-1490-3a2e-4fb9-f8d94f04dfeb
uuid: 0c8a7b54-21c1-c26a-b8ed-7d69cdcb63d9
uuid: 403b9414-e33b-2f4a-afae-20df3f9890a2
uuid: 5cb99b47-5cd5-a03b-d4b1-e686a9d05ba5
uuid: 616b3c1f-944d-4b07-9cf0-535e30c17075
uuid: 6069949f-2ac6-f85f-0257-c1fcf3e9c4fe
uuid: 08dbda9b-7ad9-415c-5f02-950e2393db65
uuid: b13bac33-046e-5537-4e5e-948c1baa44dc
uuid: 953805bc-0924-bd19-7d49-fbc129ea6294
uuid: d3919ac7-128a-dba6-b802-002325b9dded
uuid: 57d859c5-5e64-5803-2c46-4eb8be9ffd9a
uuid: efd6ce6a-d9c5-365c-3f01-f77c25e19a0d
uuid: 01eff3e1-1f05-1e85-57c2-cbaabcbdb0b6
uuid: e3b3f23e-9a53-e017-e7ad-da9c47012780
uuid: bfb0109d-6f1e-e50a-0efc-51fd4a467ba3
uuid: 34eaa441-3a6b-4bbf-c5c9-fa4860dad369
uuid: 2e1126d4-f6bb-7607-6028-967fa3c6dfc2
uuid: 5945928f-4cc6-d53c-93ae-70a518fd7281
uuid: 2ce831ce-1b53-30f1-0fdb-ce4b17d08240
uuid: bafdf8a7-873a-1b85-66f3-0d90c18fecf8
uuid: f8dd9edd-2d92-bd40-b372-cada2d32c448
uuid: 7c1479e7-0f56-827f-2e26-71690ab45c41
uuid: 0d68b71e-f06f-707d-ec3d-a540b780ae64
uuid: 95b01041-0af0-65b2-ac0c-0503bfc1758a
uuid: 335a0c98-455f-0618-a81e-3a750aaffd08
uuid: 7f01c3dd-48ee-6220-8154-095be825852c
uuid: 394eb52c-433f-72e5-770d-4981efb5738e
uuid: 2619b0f4-9d39-8f83-3842-0cd54fe5c8eb
uuid: ceb1031e-fe91-7315-2c71-8a2de7d4577e
uuid: 97a97cfc-d722-3811-390b-3255b239f583
uuid: 51a5b8b0-b91f-7919-58ac-22142a52c30a
uuid: 6a8f0301-405b-0439-a07a-9e4318a62450
uuid: 6166c209-95a0-79dc-b1e7-c379a871023c
uuid: 9267d652-d2b7-fdca-6ebf-8ac6d2db1d50
uuid: 3aa4ebdf-d3c1-e83b-8e1e-6d5a7e6a434a
uuid: e68462c6-f167-c716-a304-f66ceddbcc18
uuid: 038bda7c-b7fa-eda6-6fc1-59f435283ef8
uuid: 5d5ce9f9-47ef-e77f-135b-b438b170c19d
uuid: 3aa87ae4-8640-e1d1-f865-650ba84fcc48
uuid: e90f9bf2-78e8-0331-905a-b73a95466937
uuid: 162b1f9e-0c50-3349-7da9-bd3d698123bc
uuid: ff6b958e-50c5-4163-4d58-e90a8e3edb34
uuid: b567b4c8-499d-614e-39cc-360e8df333e6
uuid: a1233726-26c8-6492-dd6b-cce409833b42
uuid: 8641e473-56d5-2ce9-a405-ff410e970a1a
uuid: 8247300e-ecbb-c1b2-79b5-c697ef7aabe5
uuid: da376d1f-0a82-ce89-cbd7-4f0c9710654a
uuid: be1d157a-4af0-7c60-53ed-38c94cbb6bef
uuid: c7838f54-c2f3-5f61-c8a8-fc0e2a6a9ef5
uuid: b5b2181c-54cc-d11c-780a-fc8a458da854
uuid: 56ad7872-7cd7-8974-8a65-a5c65ea1285b
uuid: 082fde54-6325-e177-05d8-3522619766ba
uuid: b7a64216-85e0-6c77-484a-12d67fe8c9f5
uuid: 73d76a99-a7bf-8e29-1a9e-316e2552d00b
uuid: 982b802f-a92a-d59c-b3e5-943f15023c76
uuid: 25961929-bec9-60c6-f641-ed6f5dfc3fac
uuid: 6a9f5a53-1ffb-3ae1-e457-3a5812bc64e3
uuid: c148ee53-c2fb-1484-11a7-2a1c5345006c
uuid: c3dbac4c-4629-408f-1223-3e0fbfa3c986
uuid: 97ca1d43-9f41-4c8b-8c62-3dc2103f41c1
uuid: 197c2d7c-c359-9eb2-377e-2fe69e1d26f4
uuid: 625dd599-4075-a574-ee92-39159c22fef4
uuid: 84b3cfee-dd0a-1847-b8dc-43b4899e67af
uuid: 003b4f70-38f0-de55-aef8-c776e6c79c6a
uuid: 9d923286-cf53-192b-eabd-6d2685b4d4f6
uuid: be8fa420-f290-71a7-cfbe-4f190fdfcb4d
uuid: 896631ab-373a-b1bd-8d1b-474cef950d87
uuid: 2b694d74-57d2-2fe4-8ac9-010122f2bbd7
uuid: 2fd002bf-3339-77d4-37d6-abe6edcdd978
uuid: d1afb58f-a593-b485-c63a-24007b9e1e27
uuid: bb5121fa-2de7-5857-d5b7-3260739a7862
uuid: bd7bdc5d-ece5-88ba-0863-6508f50393fe
uuid: 8ce2f554-3e9d-67a1-cf71-f67c2f3faac1
uuid: b32d4171-162a-907b-91d6-0bee30be36ce
uuid: 63d4c9ac-5640-257d-df0b-a2617b1a215d
uuid: f9be7709-7d73-ff34-f890-120ed3faf812
uuid: 5ff9d7b4-9b4d-9a40-203c-a663d5326f3c
uuid: 18b9239f-91dc-c11f-5c61-7f662c8e4d11
uuid: 82d163d2-ad62-fbf5-96d4-9074c5716c7c
uuid: cf58a7e7-42e8-3fa8-94d6-dc284ca523ae
uuid: d86d4d75-d315-c28b-660f-6b4af313cc32
uuid: 881ca68b-b6c1-91e9-3adc-f83a64b35874
uuid: ea73d70a-e6d8-6766-23b5-a6fdb248d244
uuid: 28cc5ae8-e209-77e9-0906-52ea66740cf6
uuid: 5e3d2bbb-c9d2-3ff6-013c-e84f73958629
uuid: 9d998631-d9b8-18a8-a9db-cb0b730df889
uuid: 3fe3d862-894b-f3d1-f86f-e8ace115f4f6
uuid: 81aa7fc7-21b1-52dd-308c-b7f48a1fe0ae
uuid: ca66d0df-b064-1380-0d2e-8b0efa63de11
uuid: 54479925-70ff-49d4-70c1-342ccf5d531d
uuid: 5fa568b1-a475-cff7-7ff7-0d7d6c763f08
uuid: 8c5a85a3-aa43-99db-1448-7dc42d7feb77
uuid: 44ec9014-24c8-53d0-1196-3d007e69db5f
uuid: 31712514-2a6b-ad96-ca39-ba16abc9cecd
uuid: 9370ae0e-6c20-013f-9a1a-05609ee34174
uuid: 45fcc751-cd95-3e27-a504-b542a6f1e7b7
uuid: 99d976f0-1250-ee49-dd75-bfa903eb49cd
uuid: 34cb55e8-78b8-2465-7611-158a2f242f32
uuid: 6772e087-dd74-1d62-cbed-e1b020041af9
uuid: 6b7b2def-83c8-88ca-283f-278b1245ce6a
uuid: 488f84ef-30fb-01dd-8cd8-5a1139a6dccf
uuid: 5e947f09-839e-bbff-40f0-8b8ddaa15921
uuid: 77f6112f-0985-3b83-d1f4-4043c6b4cb51
uuid: ad2f67b8-a4f4-3840-efcb-9580b0e89ad5
uuid: 57d245fb-ddaf-f397-efaa-1045cd0b1a3e
uuid: 3f7622d7-d29f-946d-d149-69247d8cb6d3
uuid: 81043024-069d-7571-ea03-51fe18e31c96
uuid: 1d3f4e25-477b-100d-8d13-6bbb37fab2ef
uuid: c2a52c7d-08c6-5808-53a5-342ba9175334
uuid: a7a8b642-ddc6-4042-2690-a843ee5a0790
uuid: 2cd675ef-8cbb-f0a6-5697-e10837964057
uuid: 9f99c710-6804-9b4e-f8a3-a19eb175dbee
uuid: 0259d78b-89c0-ee67-f540-a1c76703b7ac
uuid: abb0d54f-1784-9e35-5406-9063c7dd6fc3
uuid: b036295d-2428-35da-7924-f6c11f54cf3c
uuid: 66266a0e-3960-bde1-2406-601010df3157
uuid: 4c844d24-5137-17da-0788-c240403f42b0
uuid: 917ac072-e639-e8f4-db42-84e41b25ef50
uuid: 5cf7fce4-59dc-de46-f885-8963573316ca
uuid: 7c114c0f-9a4c-1c10-6a80-d3128b3a8d54
uuid: 2670513e-fac0-f887-8585-9ec16db6f98a
uuid: af3c4dfe-af31-e09d-4ca8-8a83fbee6f87
uuid: 6a36237f-c51a-3624-a6a1-88e286612d2a
uuid: b8f6a53d-85d8-fdde-481b-ac31a5d16842
uuid: d07c8cb7-cfb7-9871-9100-0c617314ad58
uuid: 4771350a-7361-4f86-8bae-868777f4f3a0
uuid: 7d17af2b-568f-c42b-fc03-c2b29e3640e3
uuid: 0fa8cd41-d5a5-54a3-ecf9-9d7dced6d5b9
uuid: abd6635e-a5da-2a0b-fd2b-78cd7e008d35
uuid: e0dff8b8-d10c-baa8-cacb-7d37daf92641
uuid: 9ebd2a76-5b92-2016-fe86-310ca1f953d7
uuid: cb6ee024-6aba-e5a1-fde5-1e4f6ef6f746
uuid: c39d40a7-dcfc-b10a-daca-ddbce89621f7
uuid: 4dab986f-a2cc-542a-81b0-96c8e59985e3
uuid: ce18d269-b08f-7ee1-4c6f-6d127e23d988
uuid: 761d78ae-6a18-7de5-7dcb-a6614f673372
uuid: 6c80fdeb-76f5-4284-5f33-153546614e35
uuid: cde4b674-ae2d-615a-9908-b8ee92eedfb3
uuid: 9da6fb2e-f477-e06a-de9c-022dc3603d16
uuid: 5eec923b-01c0-a281-7336-281d9d3247d0
uuid: 3fa7abe4-a487-1fd9-5e6a-c89c226a8abf
uuid: dad66894-34fa-1c0c-806c-89d13f8ea59b
uuid: 7cd599b2-3c07-57d0-18c8-293a7b75abfd
uuid: 8033c882-7390-f0c2-a006-03feee1f12c6
uuid: 519a9fb7-d464-13e9-a5fa-ff2d693ab5a8
uuid: 33783d70-32b5-cabd-ae9e-0ee8c4fc683a
uuid: 62bde81c-b4d9-4517-1f7c-04b626f8f7ba
uuid: 09c69d01-fb19-171f-984a-bd3a30d66c4f
uuid: 5e6ba5b5-248d-de1c-0ec8-3ee069846074
uuid: 52aa422c-9cb8-94a4-3535-08db65185687
uuid: 500d47e9-61f6-567a-d9af-bf952466cba6
uuid: e82e4469-5b5b-90de-90b8-c24dbf17a205
uuid: 0e8f3e70-bd3b-0fa1-abec-4fcbdb8f231d
uuid: 43a1f467-54f2-84bf-657b-da57b12019f4
uuid: 017202dd-950a-264e-c1a9-3e09c4b7b667
uuid: 96b763ba-fa13-c140-e5bf-eccccceed8ec
uuid: ac08b2c9-71da-f7db-eeba-ebc12ca8b4fa
uuid: 67c87b85-5f53-237f-fbb5-447537813c39
uuid: f325fc56-4697-604f-96f1-e5992ac9179d
uuid: e274019b-ed84-d136-5c33-6d1b53a7b7b7
uuid: 4fa29d75-df87-2d6f-9dd8-a6d0cd1d4552
uuid: f1439972-2188-ad8e-9772-1956d1e3305a
uuid: 6c918326-f16c-e8b3-17a5-93b9690f64a4
uuid: ae704cc2-3b59-d062-8b57-75c30b8f293a
uuid: f5cf74ba-9b9d-cab4-1354-a1a0a883a028
uuid: cf1fc650-48b5-3480-57cf-4e9b62e3209d
uuid: 27ee843f-c6a1-9984-98c7-c54ac3495ac6
uuid: ec156bdf-a63b-1a67-0414-51e7da4b6871
uuid: adc329ca-af68-a233-ba3f-4ccb4ef923a6
uuid: b76b2bb5-0c93-92d1-7a99-a1c838c20432
uuid: af4bfa74-46f1-5c7f-ae77-5ead86bf6114
uuid: adeefb9d-6a17-a245-2a5f-fd192235c29f
uuid: 9ddfa95c-607d-e529-8ba2-7d0a2eff2e8d
uuid: 167f6858-21e4-cf85-df99-ee87492ea165
uuid: 45542a97-6a1c-c04d-15dd-30de8c66177c
uuid: dfd2b6db-c27f-3e52-8530-8652af4ae5f1
uuid: 982aed23-70a4-fa6d-01b7-e34fbcc8bb03
uuid: 87ebe250-af9f-ad40-5d47-771632ae6ad5
uuid: 1e83d20f-fc40-2259-2c84-37ca094d15b8
uuid: 7d5e4833-2817-8908-f67d-e0e77e3607a0
uuid: d31e6b52-719a-af60-e29f-37ac881f0679
uuid: 388bf072-213a-13d2-1415-4ec16633f83e
uuid: 94dbaaa0-43b5-c477-6a79-3371d7f85f4c
uuid: 046a6370-f46f-3d1e-12d7-ac933ce1fcd1
uuid: 3611642e-5d1f-c42c-41ab-c7b4b695a2cb
uuid: ddf05e6d-6c52-ad87-4879-b0e5c3dd12d5
uuid: 3ee9794a-3a43-875c-7bc4-ab649333a7e6
uuid: 3eed52e3-c9c9-4d15-dbd1-041380e92e95
uuid: a1acb1b7-d5ad-c2ea-b842-0034f9eb98fc
uuid: ab3cbffd-0b3f-a7c2-66d9-5700a1018239
uuid: 94429575-a76c-d1c0-f8a9-b70a2199fcbe
uuid: 521cfc7e-1c0b-f22d-7474-78f750cfa503
uuid: 7cd1f838-91ff-a860-a59b-d56737f255c0
uuid: 516d25c0-5459-5a13-85c9-1abc3f861fc6
uuid: 3287bdfe-52d5-3ced-f552-f2589ee030c4
uuid: 43c64337-7010-a3f2-5e63-f96955db17ed

##  Generate a Certificate Authority Certificate

In a production environment, you should obtain a certificate from a CA. In a test or development environment, you can generate your own CA. To generate a CA certficate, run the following commands.

1. Generate a CA certificate private key.

   ```sh
   mkdir /opt/cert
   cd /opt/cert
   openssl genrsa -out ca.key 4096
   ```

2. Generate the CA certificate.

   Adapt the values in the `-subj` option to reflect your organization. If you use an FQDN to connect your Harbor host, you must specify it as the common name (`CN`) attribute.

   ```sh
   openssl req -x509 -new -nodes -sha512 -days 3650 \
    -subj "/C=CN/ST=Beijing/L=Beijing/O=example/OU=Personal/CN=10.165.6.63" \
    -key ca.key \
    -out ca.crt
   ```

## Generate a Server Certificate

The certificate usually contains a `.crt` file and a `.key` file, for example, `10.165.6.63.crt` and `10.165.6.63.key`.

1. Generate a private key.

   ```sh
   openssl genrsa -out 10.165.6.63.key 4096
   ```

2. Generate a certificate signing request (CSR).

   Adapt the values in the `-subj` option to reflect your organization. If you use an FQDN to connect your Harbor host, you must specify it as the common name (`CN`) attribute and use it in the key and CSR filenames.

   ```sh
   openssl req -sha512 -new \
       -subj "/C=CN/ST=Beijing/L=Beijing/O=example/OU=Personal/CN=10.165.6.63" \
       -key 10.165.6.63.key \
       -out 10.165.6.63.csr
   ```

3. Generate an x509 v3 extension file.

   Regardless of whether you’re using either an FQDN or an IP address to connect to your Harbor host, you must create this file so that you can generate a certificate for your Harbor host that complies with the Subject Alternative Name (SAN) and x509 v3 extension requirements. Replace the `DNS` entries to reflect your domain.

   ```sh
   cat > v3.ext <<-EOF
   authorityKeyIdentifier=keyid,issuer
   basicConstraints=CA:FALSE
   keyUsage = digitalSignature, nonRepudiation, keyEncipherment, dataEncipherment
   extendedKeyUsage = serverAuth
   subjectAltName = @alt_names
   
   [alt_names]
   IP.1=10.165.6.63
   EOF
   ```

     重点是[alt_names]，这里写的ip地址是最后认证的，比较重要。端口不需要，一旦认证了ip以后所有端口都可以是https的

   [alt_names]： 后面为备用名称列表，可以是域名、泛域名、IP地址

4. Use the `v3.ext` file to generate a certificate for your Harbor host.

   Replace the `10.165.6.63` in the CRS and CRT file names with the Harbor host name.

   ```sh
   openssl x509 -req -sha512 -days 3650 \
       -extfile v3.ext \
       -CA ca.crt -CAkey ca.key -CAcreateserial \
       -in 10.165.6.63.csr \
       -out 10.165.6.63.crt
   ```

## Provide the Certificates to Harbor and Docker

After generating the `ca.crt`, `10.165.6.63.crt`, and `10.165.6.63.key` files, you must provide them to Harbor and to Docker, and reconfigure Harbor to use them.

1. Copy the server certificate and key into the certficates folder on your Harbor host.

   ```sh
   cp 10.165.6.63.crt /data/cert/
   cp 10.165.6.63.key /data/cert/
   ```

2. Convert `10.165.6.63.crt` to `10.165.6.63.cert`, for use by Docker.

   The Docker daemon interprets `.crt` files as CA certificates and `.cert` files as client certificates.

   ```sh
   openssl x509 -inform PEM -in 10.165.6.63.crt -out 10.165.6.63.cert
   ```

3. Copy the server certificate, key and CA files into the Docker certificates folder on the Harbor host. You must create the appropriate folders first.

   ```sh
   cp 10.165.6.63.cert /etc/docker/certs.d/10.165.6.63/
   cp 10.165.6.63.key /etc/docker/certs.d/10.165.6.63/
   cp ca.crt /etc/docker/certs.d/10.165.6.63/
   ```

   If you mapped the default `nginx` port 443 to a different port, create the folder `/etc/docker/certs.d/10.165.6.63:port`, or `/etc/docker/certs.d/harbor_IP:port`.

4. Restart Docker Engine.

   ```sh
   systemctl restart docker
   ```

You might also need to trust the certificate at the OS level. See [Troubleshooting Harbor Installation](https://goharbor.io/docs/2.0.0/install-config/troubleshoot-installation/#https) for more information.

The following example illustrates a configuration that uses custom certificates.

```fallback
/etc/docker/certs.d/
    └── 10.165.6.63:5000
       ├── 10.165.6.63.cert  <-- Server certificate signed by CA
       ├── 10.165.6.63.key   <-- Server key signed by CA
       └── ca.crt               <-- Certificate authority that signed the registry certificate
```

## Deploy or Reconfigure Harbor

If you have not yet deployed Harbor, see [Configure the Harbor YML File](https://goharbor.io/docs/2.0.0/install-config/configure-yml-file/) for information about how to configure Harbor to use the certificates by specifying the `hostname` and `https` attributes in `harbor.yml`.

If you already deployed Harbor with HTTP and want to reconfigure it to use HTTPS, perform the following steps.

1. Run the `prepare` script to enable HTTPS.

   Harbor uses an `nginx` instance as a reverse proxy for all services. You use the `prepare` script to configure `nginx` to use HTTPS. The `prepare` is in the Harbor installer bundle, at the same level as the `install.sh` script.

   ```sh
   ./prepare
   ```

2. If Harbor is running, stop and remove the existing instance.

   Your image data remains in the file system, so no data is lost.

   ```sh
   docker-compose down -v
   ```

3. Restart Harbor:

   ```sh
   docker-compose up -d
   ```

## Verify the HTTPS Connection

After setting up HTTPS for Harbor, you can verify the HTTPS connection by performing the following steps.

- Open a browser and enter [https://10.165.6.63](https://10.165.6.63/). It should display the Harbor interface.

  Some browsers might show a warning stating that the Certificate Authority (CA) is unknown. This happens when using a self-signed CA that is not from a trusted third-party CA. You can import the CA to the browser to remove the warning.

- On a machine that runs the Docker daemon, check the `/etc/docker/daemon.json` file to make sure that the `-insecure-registry` option is not set for [https://10.165.6.63](https://10.165.6.63/).

- Log into Harbor from the Docker client.

  ```sh
  docker login 10.165.6.63:5000
  ```

  If you’ve mapped `nginx` 443 port to a different port,add the port in the `login` command.

  ```sh
  docker login 10.165.6.63:5000
  ```

## 

升级完成。